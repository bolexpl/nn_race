function [y1] = gdNetBothDoublev2(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 28-Jul-2021 20:47:24.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx14 matrix, input #1
% and returns:
%   y = Qx2 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.03278;0.037097;0.043548;0.054841;0.075468;0.115881;0.135191;0.115127;0.100462;0.078792;0.05694;0.046205;0.03278;0.004303];
x1_step1.gain = [2.0677818903662;2.07705241337913;2.09106154830561;2.1160460832516;2.16325665309584;2.26213892021323;2.31264938269606;2.26021135236356;2.22336354884396;2.17106234422628;2.12075583738044;2.09688664755005;2.0677818903662;2.00906490083256];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.2428407194794406365;-3.318251845447210524;1.0692676898918436201;2.4079718423239517833;-1.7626516960203366668;2.460786052225233167;-0.97162978540749667111;-3.5834013190530242809;-0.55903115727765317899;-1.1972565686307317101;-0.51789624322215277452;-3.0866989638375637028;0.186470415799822542;-2.8514985280586118144;-3.6653137241476816399;-4.1949904649394076372;-4.0402156371543016533;8.5015535792444065777;-11.745683444692463837;-5.3798411356999844557];
IW1_1 = [1.1774627199842080394 -0.78199694171740652404 -0.66498323593457631109 0.27507143712382958745 1.9297971810641925128 -2.9327024429214567647 -0.23635735590228443281 6.2071189865133931107 -1.3118941127984928841 -0.96244162141720102088 1.7999828777810316094 -1.990196563662099738 1.2871781964412472021 0.9167504875689419519;-1.5622839941456954094 0.6515201593423673998 2.0997839342335549162 1.9718832884408397099 -0.19839872876821290637 1.2438800728130758877 -0.9167039879614334863 0.70925578688060819665 0.36970091408387012466 0.96705384011582673498 -0.11612111122026470833 -3.7115960691056719689 -2.1433272053872056695 0.70215382970300244114;-0.63737021413157046723 0.46559107487789247459 -0.15654535869460145525 0.24072672734393438243 0.53122822634203459291 -0.055050591240453222719 0.31307355656379687314 -0.52742460687063708047 0.005062714099328995826 0.082246864457050705699 -0.52003202233647860542 0.85272008888722750086 -0.40845857708363925154 0.29543257834827568731;-0.73951317358555757053 7.3484916055208948649 -1.9275535044860323541 -3.4555681692054665 11.262433653845821624 -5.907651134506227919 0.80404319542711755187 -1.4799728081058440843 7.1749020981196309776 -0.69985294718545387749 4.7392547511999758569 1.5671638395667863985 -1.027785682279410695 -5.6978546152578308792;1.2941811000317302582 -1.7648362151818652865 -2.1957506182771910908 -1.738649012891113399 0.033659180121773941974 -2.4383007446017654907 -0.57038901465451952166 0.33697929212674793131 0.12212772870622708166 -2.1942566375807444068 -0.74045294135214312359 3.4440610434298690734 0.60009248051692343218 -0.77957929053756569449;-0.25357134781947582303 1.1439232948385618105 -0.028705839182347241828 1.0780573471285785914 -0.44123586463929459489 -0.76028960687655511297 -0.73068758104432840472 0.067735137715667539937 -0.16598161939701597256 -0.36098882960338035675 0.89390761003953445041 -0.34665581303492482013 -0.32917383672832323249 1.8235212138859697717;0.82974866853492501573 0.26107671313842650829 -1.0936307105207943025 -0.24478928659196308448 -1.5676574118393662438 0.67115850856940229008 0.0014293225540216764231 -0.59736971314287368173 0.22220069678779821865 0.93653423017802206463 -0.65548250199306490327 -1.6851022906579933291 0.3460062248688927089 -0.16228348903657519031;-3.288433990050681377 -8.5265366674454696749 4.0288299702122918333 0.88195927364249371294 3.9963067465840249604 -0.0946142673389029909 -0.15544798146639871028 1.8182672529899313041 -0.44601561399404721087 4.607134699992278648 -2.5052568356440931829 10.723875833324168383 -4.2212524610331563224 -1.5740782521605225508;-1.4590100905263567732 2.815211439584118569 -0.59743415652443099262 0.25316443966973811719 -0.32267822398170531439 -0.1166601786973669036 0.19252157052625576417 -0.29146818908058691466 0.29422029431220908524 -0.0040546130304341485712 -0.97140428855302618505 0.95698125830596070251 -1.5533736758886429463 0.52363549137027953773;0.81674750960904518582 -0.065202384617167347125 -2.6306950845638796821 -0.78843860582749447641 -0.94051198296098204032 -0.44993968416370799801 0.27408730151343829728 -0.91525971010326501176 0.19512213599444683254 -1.2434773294147225542 1.1412169113406696042 -0.19618957784826987489 0.37077217786991528703 -0.45414783715656759089;0.27026948835552433437 0.13548362958115064969 -0.21520073557507146678 0.37622604517725782847 0.00064683379264979246059 -0.24799066803085209609 0.17554013106614335671 0.041540707006140896451 0.016964903091224982357 -0.37665560889231791686 -0.021072184606051168332 1.098140056025196154 -0.49852803159418068724 2.0647201974673312641;-1.0408868080179554116 2.3862041060184546737 -1.2592363507319932481 -1.4313527998471147207 0.60176452944241198839 -1.2499214968949476923 -1.0292963797353085198 -0.12699296926628417248 -0.38518351482858859125 1.8230003988546974458 -0.55304223690487486209 -3.1676115539698090906 -0.7913762257435392744 -0.52886899566873535328;0.84770455850255410635 6.2660953861469392834 -13.73664884649823037 3.1067859862881022082 -4.7909426734831441763 1.9659056924817228662 8.4082150913571229722 5.859061654920572515 1.6438982722056105779 0.21903210382280824398 7.1080699479581737066 0.10137741153062485022 -0.25582649393220691092 -0.83918279315026267362;-7.0798430970136028151 14.764718469945954382 -0.94671253587033088461 2.5232052098236121829 8.2329430705344535113 -11.967600218481475594 -0.90904813661899419586 2.0449605835369371043 0.58072504388327794711 2.093632816570198063 -6.6077896192022542721 6.86690479053249625 -7.1650205245569402734 1.7361098347414452014;-2.3219671159652581771 -1.6195004290009000769 2.395027364264037395 1.0889131127069160421 0.3356606935019771365 -1.5597173268821169501 8.7461445547138794154 2.2681186106484889642 -2.2403503604691001883 -6.4141671228312668873 -6.7390588505116308937 6.7432347536120582632 -1.732056897037234755 4.1781514406701845132;-1.2806901600583089351 1.1537816730829699718 -4.0725865014991997626 -1.8218396969322772083 -1.0266372983603666569 0.53616190705432487107 2.5265638892657857895 -0.90616216729602072633 0.054461762297606165772 0.58206227726297554703 0.45633169917667276705 -0.5553409362177019748 -0.85030944478183068114 0.24874533933104192585;-2.5466796116419083695 0.85349352660118638081 1.7138633215685081801 1.9297098904213048076 1.0091416928506866668 -0.16183021215027706963 -1.6363632998505186489 0.93361200770941765725 0.43502998124505498634 -0.56812143660581915228 1.1573093963649940807 -4.4707751460816878009 -2.0081782718269307608 0.12784721086882130936;2.4667956306709664105 -15.619502218069714061 8.1946587945888431648 10.107381446892953036 2.5391798930975415516 3.5639515031090556185 11.369039374401461728 2.0445664439491726405 -0.75167387094800597325 14.706327164686058495 0.20961813484513541761 12.838275402850582552 3.0207263027507620379 -6.7184383594640628701;-3.9143857579044332162 4.3645065982929374115 -1.0851579691746757739 -0.87807539100468046112 0.92504239019145106937 -3.0504233952237789218 0.97606863869738602624 0.038627070751125022752 -1.8747362685727928522 0.33638228908491563107 -5.1960228866321784835 -1.3718954999773418368 -4.4016212036698387777 0.23084169886335775823;-0.39448433883826294899 1.6042400564096657156 -2.0246677204161436237 -1.8314492407241331762 -2.505901139000723532 3.0159597359677090544 -4.4060614725014604076 -1.2608187445153047346 0.4122929645134049137 -0.27296823298091071885 -0.387461368892564606 -0.23928059863117653872 -0.044836149776893666208 -0.65498245280167155524];

% Layer 2
b2 = [1.0254177688981511718;0.70314415436221211486];
LW2_1 = [0.64411490658226788764 0.86511805985583156708 -2.0182815313674935531 -0.13501893016809782266 -0.56120747357045497328 -0.61859185480571876603 -1.0375043622473720806 0.19728262888331085656 1.0283541200545318617 0.92347740615678186593 -0.23723824330777523728 0.75575913945134309824 0.17810332362766270742 -0.26767244791750366417 0.23558175273271986239 -0.48595052123158449797 -0.97226042359016207062 -0.11347094951672642704 -0.78181550435922386733 0.5468671754298525256;-0.0055202078868351496521 -0.18625990383051529986 0.024314762824250504836 -0.51590606619097012508 -0.0042614385663609782862 -1.1871344508325836209 0.25513721591717419823 -0.036002841811149904894 -0.20237489923889651067 -0.28425186253589718177 0.78934650549490670279 0.025566767207050814653 -0.065236637798194496707 0.037964183503761753102 -0.0097817910378392870091 0.12217046920777645258 0.18590270720157983653 -0.2478825854127842121 -0.053015286157710957149 -0.0714105623865897432];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;2];
y1_step1.xoffset = [-1;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
