function [y1] = gdNetBothv2(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 28-Jul-2021 20:43:38.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx14 matrix, input #1
% and returns:
%   y = Qx2 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.03278;0.037097;0.043548;0.054841;0.075468;0.115881;0.135191;0.115127;0.100462;0.078792;0.05694;0.046205;0.03278;0.004303];
x1_step1.gain = [2.0677818903662;2.07705241337913;2.09106154830561;2.1160460832516;2.16325665309584;2.26213892021323;2.31264938269606;2.26021135236356;2.22336354884396;2.17106234422628;2.12075583738044;2.09688664755005;2.0677818903662;2.00906490083256];
x1_step1.ymin = -1;

% Layer 1
b1 = [6.9308726798325750451;-1.4107233043247586757;0.50682825909342366089;0.66092318812086714441;-1.478774946828401271;3.4898873350928778514;4.0316792288292377933;0.49147469654831271724;0.056285139348251730929;0.55707628063995284773;-0.14912872330379706165;2.6293883501815162873;-3.4751296383580214666;-0.84765504462788698881;-0.72534798500415964551;-2.5652676366487310311;-4.7712946945198710935;1.4336126835329416895;1.4234000670517914511;-11.426582522629537664];
IW1_1 = [0.20469110635373669038 2.8014129118178030531 0.31307807253841163364 -1.9352676553328411746 -3.5399527911239125899 -0.22219246687792629236 5.8611179719760126972 -2.46973533798182876 3.6281104744247421046 -0.52367136697799765432 1.3538682162902357931 -1.427440688685832626 0.48415506792966678251 -2.8249049990398669152;0.079644725406614311214 0.20778789569165528883 1.3646547781062039473 0.67272946441772074611 -1.5157664228670979512 1.5884106086925280366 0.86134714384521660069 -2.06034957969367305 1.9994890281851898095 0.14591503718617804264 0.78041873836370545536 -1.5414710980591417311 -0.89346352858951816334 -1.9552182727150624331;1.737560063369205432 -1.8867968024636148083 -0.9900611996785740887 -0.81543104261590149129 0.57822388035741523193 0.41473396596948336468 0.28538511077015105144 -1.5428422626447253485 1.3838995837141077061 -1.0836159259097981611 3.3981253731133169715 -0.37027353331849655049 0.46155045449993170603 -0.41220471806919950497;-1.0715728071510020047 -0.70027325654073269146 3.2254834740156352879 -0.551482813963810381 -4.0167025830116562801 0.57236172260457451877 1.7783970299508329305 3.4922766094417152516 0.94423098765046775682 1.6067993264053330726 -1.8963427421870961975 0.17429997836554761426 -1.4054426107447235417 2.1740546035661760804;0.56978635870548544062 -0.14629792239984509838 -0.94858076446653094571 -1.5514831477897117473 -0.1321211242389466467 -0.27769876692405548457 1.289510517223268371 -1.5613354417041784838 0.45542096640321799716 0.073577778771509894096 -0.26534787395216802297 -0.032315828195076071183 0.13528670708183962446 -0.34363815771656192055;-0.30149064000123060314 0.18843580040328877789 -0.68545559913599907187 1.4337562029863244462 0.82934428944101967751 -0.84785805241277756306 -0.16000830266472548802 -0.011690546702892851139 0.22429827243293495864 0.63085966682556404717 0.19864512846943227498 1.3863120569464433274 0.62341302686705835079 -0.22449039637039100437;1.2848310087327683426 -1.4716185972758508704 1.6495570431822730306 2.5680919191637960886 -2.3339667566898816276 2.3190297142097424654 -0.27145381077254276958 1.0390239887111909489 -0.58508219621852097792 -1.4651618210500623185 -0.54773798433703713151 -0.12526251185338962979 2.0581313227968678348 0.64492936907045572692;-0.2491397428280140991 -0.20041874991009872575 -1.5005497381309438332 -0.48507358294429869794 1.0431586343547736284 -1.6521532095917808025 -0.84743775997029313629 1.9122545728434741097 -1.9572819128870986294 -0.28234924797204452585 -0.75238323376492943773 1.5501863486811957582 0.23013008701649179111 2.4009131856563623586;-0.30769531547018408313 0.18771522614350871772 -0.008585033448685485194 0.64893647415234345655 0.38888515295685488482 -0.19731503025817392905 -0.52412653950186904872 0.48519164147379739704 -0.029181202908372335519 0.065708911420549159788 0.23991985556913875133 -0.018298316349741224063 0.056743894620232479542 0.92569022627637442824;0.27171316874070700065 1.8871434982155772531 -0.90740832379867952806 -0.98300211584711794099 -0.77996669769621496116 -0.53116004356111323759 1.0839963326578063718 -1.1424440872274994607 -0.50092025872556766863 -0.46192139383057911894 1.3081639319012006162 0.31991224417616270781 -0.73002922688105931215 -0.84270638346764459303;0.52970891807349784752 -4.1049963341745092649 1.5575613447359935027 2.2327473804185360429 0.2686561278556458543 0.45154444132873894358 -0.32303768462204907053 0.72758873035965165865 0.39287780980105629913 0.97074672467767797457 -1.9056251545159721417 0.53382247387384040849 0.65954394134556648677 0.78519713466656648748;1.5165681253919249816 0.18449963508635469633 1.3821572737482887838 2.4974043341234790638 1.1315952320262094855 -0.078538601856647932697 -0.87806114401220514143 -2.4380831452752023125 1.8406996842080800558 0.43729609119497087066 2.4416984427433310323 -0.53658271451939820729 0.19938984870773243663 -0.12494058562307006066;0.89875299299423039301 -0.55879285070148110304 -2.7037630491957056478 -1.9082927690861877235 -4.2897624930217039818 0.67052769166688586111 -0.75725815097294379985 -0.10406276551225017435 -3.0783797222224591472 -1.3788052615965786796 -2.5472751711536512076 -2.048647791926778261 0.32294040444884258845 3.4079821474713170026;-0.48518740027578199925 -0.53997921543500260189 0.0054615243860059396047 -0.82248067019700943359 1.4995694477514283083 -0.58842128180681385619 -0.020358950857371417575 0.40606118371159938274 -0.98499917479682508326 -0.18955736074201659513 -0.66665732191777538063 0.73071441999224340247 -0.98289269200624240774 1.042676520422651798;-1.0826471838660760572 1.1814019282432552949 2.250842295272970528 -1.5695413405708011911 1.0102505166592441466 -0.7217319853961275955 0.73133008749954209193 2.4250683925135207986 1.0746821491889730904 -1.0932516565597754088 1.5655738370749188171 -3.4527707491298738063 -0.63430243898586224915 0.57110292094495185289;-0.53545326824421402012 0.33513789195449378289 -0.4759897260535298491 -2.6344573229280681126 3.6015274069941978219 -5.1529685505718312299 3.7232548273751824297 2.0681412106515808524 0.35563512930059032469 -0.4630783457970335526 -0.063860957380646718451 -2.7543401773258198162 -0.93686153032376739969 -0.07821165694087070519;-0.85049918979811633957 -0.095909847620004179403 0.83429803964129056748 -1.081611537085334307 -1.0815113960200388732 0.91034570821768256987 0.40983862611524463082 0.17539757492351792934 -0.008668613519964616862 -1.1558130164832900455 -0.80086273733131052577 -1.2782231549983882335 -0.952377044790416738 -0.17290213937744963735;1.2568938625477161786 0.42841457322932857688 0.15751936207983324723 0.0073461906383828689746 -0.4135160430313386537 0.12145659421230400876 -0.29464261380451117756 0.78273407885904577874 -0.39129926694101363482 -0.87053078572048769868 -0.67753967513306778692 -0.75482402846044271971 1.285734068555878018 0.56951136827554416087;-0.12540459602349632307 0.73483347364359163922 -0.13747628130053610174 -1.0014700294552387749 1.0203412072528994514 0.67833192765793193235 -0.91785026912361267204 0.62182164400807382609 -0.87104111993666311076 -0.56739864418556351655 1.255970769538431675 -1.1964963620526791743 -0.75137096690279014943 -0.85601663833244012736;-5.5637367099785723923 8.2215843073653172013 -2.0955454978395628984 -3.066409318664848449 -0.54572019696903495412 -0.78280931499419803554 1.2484596794727063074 -0.14559585038216499298 0.074796842118726891702 -2.1241795633576279201 -5.5615229522291649289 -0.044439615769318818739 -4.6304291765195140229 -0.56396524201493081208];

% Layer 2
b2 = [-1.2624084192166953322;0.067079599079913468374];
LW2_1 = [0.2616536035937221949 -0.90978027400758354482 -0.74946927060895185413 -0.19015051596735782491 1.3211652490761260914 2.9076880216776741506 0.71837297386647502861 0.055777129001544321907 1.2501347931077793074 -1.0965623615053872175 -1.4035912482767314291 -0.42490344779552030596 -0.21663948874715738269 -1.1725417558878361568 0.27994474969807059406 -0.44076768611081257321 2.7481636801377322676 -1.0549559432398232239 0.75031110953051061152 -0.88838038792286788681;0.05248573516594962074 -3.815965016684797817 0.060862482995622593784 -0.012135257326005590567 0.57424092585078057027 -1.0356370540830455163 0.1289967829978574676 -3.882554053345584677 1.4152660087391146781 0.12150919094374570961 0.20816983873194036536 -0.016650963103320017 0.98937813532652052473 0.13877034745080177314 0.044958311882598203657 -0.0092322755149577308276 -0.35195340704878641525 -0.076512435405239484498 -0.096580459928881479126 0.027368119442347509096];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;2];
y1_step1.xoffset = [-1;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
